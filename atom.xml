<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lucky Dog&#39;s blogs</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-08-04T09:53:20.792Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>nginx命令和配置文件</title>
    <link href="http://example.com/post/994b7c8f.html"/>
    <id>http://example.com/post/994b7c8f.html</id>
    <published>2022-08-04T08:13:27.000Z</published>
    <updated>2022-08-04T09:53:20.792Z</updated>
    
    <content type="html"><![CDATA[<p>声明：使用的<code>CentOS7</code>操作系统</p><h1 id="Nginx命令"><a href="#Nginx命令" class="headerlink" title="Nginx命令"></a>Nginx命令</h1><p>执行<code>nginx</code>命令，需要在命令需要使用<code>nginx/sbin</code>目录下的<code>naginx</code>文件。可以是<font color="red"><strong>相对路径</strong></font>或者<font color="red"><strong>绝对路径</strong></font></p><p>首先进入到<code>nginx/sbin</code>目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/nginx/sbin</span><br></pre></td></tr></table></figure><p>配置<code>Nginx</code>环境变量，就可以在任意目录使用<code>nginx</code>命令了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>在PATH后追加<code>/usr/local/nginx/sbin:</code>，然后保存退出就好了。</p><p>然后<code>source /etc/profile</code>，然他立即生效。</p><p><font color="blue" size=5><strong>查看版本命令:</strong></font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br><span class="line"></span><br><span class="line">[root@bogon sbin]<span class="comment"># nginx -v</span></span><br><span class="line">nginx version: nginx/1.18.0</span><br></pre></td></tr></table></figure><p><font color="blue" size= 5><strong>检查配置文件的正确性</strong></font></p><p>在启动<code>Nginx</code>服务之前，可以先检查一下<code>conf/nginx.conf</code>配置文件是否有错误。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nginx -t   <span class="comment">#t 是 test</span></span><br><span class="line"></span><br><span class="line">[root@bogon sbin]<span class="comment"># nginx -t</span></span><br><span class="line">nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/local/nginx/conf/nginx.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure><p><font color="blue" size= 5><strong>启动和停止</strong></font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">niginx<span class="comment">#启动nginx服务</span></span><br><span class="line">ngi  <span class="comment">#停止nginx服务</span></span><br><span class="line">ps -ef|grep nginx<span class="comment">#启动完成后查看Nginx进程</span></span><br></pre></td></tr></table></figure><p>查看<code>nginx</code>进程,可以的看到有两个进程，第三个是我们执行这条命令对应的进程，可以忽略。<strong>主要看前面两条</strong></p><p>启动完成会有两个进程，一个<code>work</code>进程和一个<code>master</code>进程，可以通过**修改配置文件[<code>conf/nginx.conf</code>]**，添加更多<code>work</code>进程。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon sbin]<span class="comment"># ps -ef|grep nginx</span></span><br><span class="line">root      96952      1  0 16:25 ?        00:00:00 nginx: master process ./nginx</span><br><span class="line">nobody    96953  96952  0 16:25 ?        00:00:00 nginx: worker process</span><br><span class="line">root      97742  88062  0 16:25 pts/0    00:00:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure><p><code>nginx</code>默认的端口号是80端口。查看本机的<code>ip</code>地址，然后在windows浏览器的地址栏中，就可以访问<code>nginx</code>的<strong>静态资源</strong>。</p><p>【记得关<code>linux</code>的防火墙哦….，<code>systemctl stop firewalld</code>】</p><p>就可以看到以下界面</p><img src="\image\article\nginx简单命令\image-20220804163517886.png" alt="image-20220804163517886" style="zoom: 43%;" /><p>而且，启动之后，进入<code>nginx</code>根目录，可以看到很多<strong>临时目录</strong>，以<code>_temp</code>结尾的目录都是临时目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon nginx]<span class="comment"># ll</span></span><br><span class="line">total 4</span><br><span class="line">drwx------. 2 nobody root    6 Aug  4 16:20 client_body_temp</span><br><span class="line">drwxr-xr-x. 2 root   root 4096 Aug  3 21:47 conf</span><br><span class="line">drwx------. 2 nobody root    6 Aug  4 16:20 fastcgi_temp</span><br><span class="line">drwxr-xr-x. 2 root   root   40 Aug  3 21:47 html</span><br><span class="line">drwxr-xr-x. 2 root   root   58 Aug  4 16:20 logs</span><br><span class="line">drwx------. 2 nobody root    6 Aug  4 16:20 proxy_temp</span><br><span class="line">drwxr-xr-x. 2 root   root   19 Aug  3 21:47 sbin</span><br><span class="line">drwx------. 2 nobody root    6 Aug  4 16:20 scgi_temp</span><br><span class="line">drwx------. 2 nobody root    6 Aug  4 16:20 uwsgi_temp</span><br></pre></td></tr></table></figure><p>进入<code>logs</code>目录，就可以看到一些日志文件了</p><p><font color="blue" size= 5><strong>重新加载配置文件</strong></font></p><p>当修改<code>Nginx</code>配置文件后，需要重新加载才能生效，可以使用下面命令重写加载配置文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><p>在启动<code>Nginx</code>后，修改配置文件后，就可以直接使用上面的命令直接生效，不用重启<code>Nginx</code>。</p><h1 id="Nginx配置文件整体结构"><a href="#Nginx配置文件整体结构" class="headerlink" title="Nginx配置文件整体结构"></a>Nginx配置文件整体结构</h1><p><code>Nginx</code>配置文件(<code>conf/nginx.conf</code>)整体分为三部分:</p><ul><li><strong>全局块</strong>和<code>Nginx</code>运行相关的全局配置</li><li><strong>events块</strong>和网络连接相关的配置</li><li><strong>http块</strong>代理、缓存、日志记录、虚拟主机配置<ul><li>http全局块</li><li>Server块<ul><li>Server全局块</li><li>location块</li></ul></li></ul></li></ul><p>http全局块<br>Server块<br>Server全局块location块</p><blockquote><p>注意: http块中可以配置多个Server块，每个Server块中可以配置多个location块。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#==================全局配置块==================</span></span><br><span class="line">worker_processes  1;</span><br><span class="line"><span class="comment">#==================全局配置块==================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#==================events配置块==================</span></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#==================events配置块==================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#==============================http配置块==============================</span></span><br><span class="line">http &#123;</span><br><span class="line"><span class="comment">#==================http全局配置块==================</span></span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"><span class="comment">#==================http全局配置块==================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#==================Server配置块==================【可以有多个】</span></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        <span class="comment">#=============location配置块============【可以有多个】</span></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#=============location配置块============</span></span><br><span class="line"></span><br><span class="line">     </span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">   <span class="comment">#=============location配置块============【可以有多个】</span></span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#=============location配置块============</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#==================Server配置块==================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#==============================http配置块==============================</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Nignx一些简单命令和配置文件整体结构的整体结构说明</summary>
    
    
    
    <category term="Nginx" scheme="http://example.com/category/Nginx/"/>
    
    
    <category term="Nginx" scheme="http://example.com/tag/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>初识Nginx</title>
    <link href="http://example.com/post/79465e19.html"/>
    <id>http://example.com/post/79465e19.html</id>
    <published>2022-08-03T13:58:16.000Z</published>
    <updated>2022-08-03T14:31:20.776Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Nginx介绍"><a href="#Nginx介绍" class="headerlink" title="Nginx介绍"></a>Nginx介绍</h1><p><code>Nginx</code>是一款轻量级的web服务器&#x2F;反向代理服务器及电子邮件（<code>IMAP/POP3</code>）代理服务器。其特点是占有内存少，并发能力强，事实上<code>nginx</code>的并发能力在同类型的网页服务器中表现较好，中国大陆使用<code>nginx</code>的网站有:百度、京东、新浪、网易、腾讯、淘宝等。</p><p>官网：<a href="https://nginx.org/">https://nginx.org/</a></p><h1 id="Nginx的下载与安装"><a href="#Nginx的下载与安装" class="headerlink" title="Nginx的下载与安装"></a>Nginx的下载与安装</h1><p><a href="https://nginx.org/en/download.html">下载地址</a></p><p>建议下载稳定版本或者更早的版本，新版本不稳定。</p><p>安装过程：</p><ol><li><p>安装依赖包<code>yum -y install gcc pcre-devel zlib-devel openssl openssl-devel</code>。</p></li><li><p>下载<code>Nginx</code>安装包</p><ol><li><p>第一种方法是，在windows下载好了，上传到<code>linux</code>。</p></li><li><p>第二种方法是，使用<code>wget</code></p><p>没有<code>wget</code>,需要先安装<code>wget</code>,命令：<code>yum install wget</code></p><p>去下载地址，复制下载链接</p><img src="\image\article\初识Nginx\image-20220803212521900.png" alt="image-20220803212521900" style="zoom:50%;" /><p>然后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="string">&quot;你复制的下载链接&quot;</span></span><br><span class="line">比如:  wget https://nginx.org/download/nginx-1.18.0.tar.gz</span><br></pre></td></tr></table></figure><p>下载完成后就有一个<code>nginx-1.18.0.tar.gz</code>，压缩包</p></li></ol></li><li><p>解压压缩包<code>tar -zxvf nginx-1.18.0.tar.gz</code>,得到一个目录<code>nginx-1.18.0</code>。</p></li><li><p>进入到<code>nginx-1.18.0</code>这个目录里，命令：<code>cd nginx-1.18.0</code></p></li><li><p>安装到 <code>/usr/local/nginx</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /usr/local/nginx</span><br><span class="line">./configure --prefix=/usr/local/nginx    <span class="comment">#安装前的检查工作以及配置环境变量</span></span><br><span class="line">make &amp;&amp; make install   <span class="comment">#编译并安装</span></span><br></pre></td></tr></table></figure><p>安装完成！</p></li></ol><h1 id="Nginx的目录介绍"><a href="#Nginx的目录介绍" class="headerlink" title="Nginx的目录介绍"></a>Nginx的目录介绍</h1><p>查看<code>Nginx</code>目录结果树形</p><p>先安装tree <code>yum install tree</code></p><p>再进入到nginx目录下，<code>cd /usr/local/nginx</code>，然后输入命令查看<code>tree</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">|-- conf<span class="comment">#存放配置文件</span></span><br><span class="line">|   |-- fastcgi.conf</span><br><span class="line">|   |-- fastcgi.conf.default</span><br><span class="line">|   |-- fastcgi_params</span><br><span class="line">|   |-- fastcgi_params.default</span><br><span class="line">|   |-- koi-utf</span><br><span class="line">|   |-- koi-win</span><br><span class="line">|   |-- mime.types</span><br><span class="line">|   |-- mime.types.default</span><br><span class="line">|   |-- nginx.conf<span class="comment">#nginx的配置文件 /conf/nginx.conf</span></span><br><span class="line">|   |-- nginx.conf.default</span><br><span class="line">|   |-- scgi_params</span><br><span class="line">|   |-- scgi_params.default</span><br><span class="line">|   |-- uwsgi_params</span><br><span class="line">|   |-- uwsgi_params.default</span><br><span class="line">|   `-- win-utf</span><br><span class="line">|-- html<span class="comment">#存放静态文件（html,css,js）</span></span><br><span class="line">|   |-- 50x.html<span class="comment">#默认提供的两个静态文件50x.html和index.html</span></span><br><span class="line">|   `-- index.html</span><br><span class="line">|-- logs<span class="comment">#存放日志文件由于刚安装没有启动过，所以是一个空的目录</span></span><br><span class="line">`-- sbin<span class="comment">#存放nginx的脚步文件</span></span><br><span class="line">    `-- nginx<span class="comment">#二进制文件，主要是用来  启动nginx和停止nginx</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Nginx介绍、下载与安装以及目录介绍</summary>
    
    
    
    <category term="Nginx" scheme="http://example.com/category/Nginx/"/>
    
    
    <category term="Nginx" scheme="http://example.com/tag/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>如何不用第三个变量交换值</title>
    <link href="http://example.com/post/c115a0c6.html"/>
    <id>http://example.com/post/c115a0c6.html</id>
    <published>2022-08-03T12:29:06.000Z</published>
    <updated>2022-08-03T13:04:56.535Z</updated>
    
    <content type="html"><![CDATA[<p>今天逛牛客，看见了一个面经，然后就进去看了看。突然看到一个问题：</p><p><font color="blue" size=5>int a&#x3D;5,b&#x3D;3 如何不用第三个变量，调换它俩的值</font></p><p>我第一反应，啊！啊？啊？啊o((⊙﹏⊙))o.。震惊我一百年，不用第三个变量，这怎么变？</p><p>我想到Go语言，有个语法糖，确实不需要第三个变量就可以交换值。难道Java也有？？？</p><p>然后，我就百度搜索了一个，不禁感叹，女少口阿！女少口阿！</p><p>然后特此记录以下，记录两个方法吧</p><h1 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">5</span>,b=<span class="number">3</span>;</span><br><span class="line">b = (a+b)-(a=b);</span><br></pre></td></tr></table></figure><p><code>b = (a+b)-(a=b);</code>，啊这….</p><p>代码从左向右执行，先是<code>a+b</code>，然后是把<code>b</code>赋值给<code>a</code>，最后是<code>a+b-b</code>赋值给b。</p><p>然后就交换了值。巧妙的利用了，代码的执行顺序。真是细他妈给细开门——细到家了！！！</p><h1 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h1><p>这种方法算是一种算法吧</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">a = b - a; <span class="comment">//b=3;a=5;--&gt;a = -2</span></span><br><span class="line">b = b - a; <span class="comment">//b=3;a=-2;--&gt;b = 5</span></span><br><span class="line">a = b + a; <span class="comment">//b=5;a=-2; ---&gt;a=3</span></span><br><span class="line"><span class="comment">//最后a = 3, b = 5 </span></span><br></pre></td></tr></table></figure><p>这也很妙啊，说不上来的妙。</p><p>这也算是一个编程小tips！我觉得还是方法一好！</p>]]></content>
    
    
    <summary type="html">妙妙妙~</summary>
    
    
    
    <category term="其他" scheme="http://example.com/category/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="妙" scheme="http://example.com/tag/%E5%A6%99/"/>
    
  </entry>
  
  <entry>
    <title>项目实现读写分离</title>
    <link href="http://example.com/post/c6ed6a2c.html"/>
    <id>http://example.com/post/c6ed6a2c.html</id>
    <published>2022-08-03T08:28:28.000Z</published>
    <updated>2022-08-03T09:10:13.356Z</updated>
    
    <content type="html"><![CDATA[<h1 id="为什么要实现读写分离？"><a href="#为什么要实现读写分离？" class="headerlink" title="为什么要实现读写分离？"></a>为什么要实现读写分离？</h1><p>面对日益增加的系统访问量，数据库的吞吐量面临着巨大瓶颈。对于同一时刻有大量并发读操作和较少写操作类型的应用系统来说，**将数据库拆分为<font color="red">主库</font>和<font color="red">从库</font>**。</p><p><font color="red"><strong>主库</strong></font>负责处理事务性的<font color="blue"><strong>增删改操作</strong></font>。</p><p><font color="red"><strong>从库</strong></font>负责处理<font color="blue"><strong>查询操作</strong></font>。</p><p>能够有效的避免由数据更新导致的行锁，使得整个系统的查询性能得到极大的改善。</p><p><img src="/%5Cimage%5Carticle%5C%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%5Cimage-20220803163902754.png" alt="image-20220803163902754"></p><h1 id="Sharding-JDBC介绍"><a href="#Sharding-JDBC介绍" class="headerlink" title="Sharding-JDBC介绍"></a><code>Sharding-JDBC</code>介绍</h1><p><code>Sharding-JDBC</code>定位为轻量级Java框架，在Java的<code>JDBC</code>层<strong>提供的额外服务</strong>。它使用客户端直连数据库，以jar包形式提供服务，无需额外部署和依赖，可理解为<font color="red"><strong>增强版的JDBC驱动</strong></font>，完全兼容<code>JDBC</code>和各种<code>ORM</code>框架。<br>使用<code>Sharding-JDBC</code>可以在程序中轻松的实现数据库读写分离。</p><ul><li>适用于任何基于<code>JDBC</code>的<code>ORM</code>框架，如:<code>JPA</code>, <code>Hibernate,Mybatis</code>, <code>Spring JDBC Template</code>或直接使用<code>JDBC</code>。</li><li>支持任何第三方的数据库连接池，如:<code>DBCP</code>,<code>C3P0</code>,<code>BoneCP</code>, <code>Druid</code>,<code> HikariCP</code>等。</li><li>支持任意实现<code>JDBC</code>规范的数据库。目前支持<code>MySQL</code>，Oracle，<code>SQLServer</code>，<code>PostgreSQL</code>以及任何遵循<code>SQL92</code>标准的数据库。</li></ul><h1 id="实现读写分离"><a href="#实现读写分离" class="headerlink" title="实现读写分离"></a>实现读写分离</h1><p>首先需要将原来的数据库的数据导出为<code>sql</code>文件。</p><p>然后配置<a href="https://luckydog-tjs.vercel.app/post/e696a246.html"><strong>数据库的主从复制</strong></a>，看我另一篇博客。</p><p>然后再将之前的<code>sql</code>文件，导入到主库中，注意啊，是<font color="red" size=5><strong>主库</strong></font>！！</p><p>步骤：</p><ol><li><p>导入maven坐标</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shardingsphere<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sharding-jdbc-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0-RC1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在配置文件中配置读写分离规则</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment">#=============================读写分离配置=====================================</span></span><br><span class="line">  <span class="attr">shardingsphere:</span></span><br><span class="line">    <span class="attr">datasource:</span></span><br><span class="line">      <span class="attr">names:</span></span><br><span class="line">        <span class="comment">#数据源名字</span></span><br><span class="line">        <span class="string">master,slave</span><span class="comment">#slave2...</span></span><br><span class="line">      <span class="comment"># 主数据源</span></span><br><span class="line">      <span class="attr">master:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/reggie?characterEncoding=utf-8</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">      <span class="comment"># 从数据源</span></span><br><span class="line">      <span class="attr">slave:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.37.130:3306/reggie?characterEncoding=utf-8</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">      <span class="comment">#slave2:</span></span><br><span class="line">      <span class="comment">#   tyepe:...</span></span><br><span class="line">      <span class="comment">#   .....</span></span><br><span class="line">    <span class="attr">masterslave:</span></span><br><span class="line">      <span class="comment"># 读写分离配置</span></span><br><span class="line">      <span class="attr">load-balance-algorithm-type:</span> <span class="string">round_robin</span>  <span class="comment">#负载均衡策略：轮询【从库可能有多个】</span></span><br><span class="line">      <span class="comment"># 最终的数据源名称</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">dataSource</span></span><br><span class="line">      <span class="comment"># 主库数据源名称</span></span><br><span class="line">      <span class="attr">master-data-source-name:</span> <span class="string">master</span>   <span class="comment">#主数据源名字</span></span><br><span class="line">      <span class="comment"># 从库数据源名称列表，多个逗号分隔</span></span><br><span class="line">      <span class="attr">slave-data-source-names:</span> <span class="string">slave</span>    <span class="comment">#从数据源名字</span></span><br><span class="line">    <span class="attr">props:</span></span><br><span class="line">      <span class="attr">sql:</span></span><br><span class="line">        <span class="attr">show:</span> <span class="literal">true</span> <span class="comment">#开启SQL显示，默认false</span></span><br></pre></td></tr></table></figure></li><li><p>在配置文件中允许bean定义覆盖配置项</p></li></ol><p>当启动时，<code>DruidDataSource</code>想创建一个数据源对象<code>DataSource</code>。然后<code>sharding-jdbc</code>也想创建一个数据源对象<code>DataSource</code>，这样会产生冲突，可以配置<strong>允许bean定义覆盖配置项</strong>，这样后创建的会覆盖前面的。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">main:</span></span><br><span class="line">        <span class="attr">allow-bean-definition-overriding:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>其他代码啥也不用改。非常简单，不需要写额外的Java代码</p><p>当启动项目查询数据库时，发现<code>WHERE (dish_id = ?) ORDER BY update_time DESC ::: DataSources: slave</code>，就表明配置成功。</p>]]></content>
    
    
    <summary type="html">基于Sharding-JDBC框架实现读写分离</summary>
    
    
    
    <category term="Spring" scheme="http://example.com/category/Spring/"/>
    
    
    <category term="读写分离" scheme="http://example.com/tag/%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/"/>
    
  </entry>
  
  <entry>
    <title>MYSQL主从配置</title>
    <link href="http://example.com/post/e696a246.html"/>
    <id>http://example.com/post/e696a246.html</id>
    <published>2022-08-03T03:05:07.000Z</published>
    <updated>2022-08-03T06:19:44.516Z</updated>
    
    <content type="html"><![CDATA[<p>首先你要保证，<code>windows</code>的mysql的版本和<code>linux</code>的mysql<font color="red"><strong>版本要一致！</strong></font></p><p>我windows版本是<code>8.0.26</code>，linux虚拟机是CentOS7，mysql版本是<code>8.0.30</code>.</p><h1 id="主库配置"><a href="#主库配置" class="headerlink" title="主库配置"></a>主库配置</h1><p>主库是在windows系统。</p><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>一般是在C盘的<code>C:\ProgramData\MySQL\MySQL Server 8.0</code>,目录下有个<code>my.ini</code>配置文件。</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置server-id</span></span><br><span class="line"><span class="attr">server-id</span>=<span class="number">1</span> </span><br><span class="line"><span class="comment">#开启二进制文件</span></span><br><span class="line"><span class="attr">log-bin</span>=mysql-bin </span><br></pre></td></tr></table></figure><p>在<code>[mysqld]</code>下面，添加以上内容。<code>server-id</code>是服务器唯一id，可以是其他数字，但不能和从库的<code>server-id</code>重复!!</p><p>只要不重复，啥数字都可以。</p><h2 id="重启mysql服务"><a href="#重启mysql服务" class="headerlink" title="重启mysql服务"></a>重启mysql服务</h2><h3 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h3><p><code>我的电脑</code>,右键选择<code>管理</code>。</p><img src="\image\article\MYSQL主从配置\image-20220803112549738.png" alt="image-20220803112549738" style="zoom:67%;" /><p>在服务名称上，右键 <code>停止</code>再<code>启动</code>。</p><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>以<code>管理员身份</code>运行<code>命令提示符</code>。</p><img src="\image\article\MYSQL主从配置\image-20220803112728812.png" alt="image-20220803112728812" style="zoom:50%;" /><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> stop mysql80   #或者<span class="built_in">net</span> stop mysql   停止服务</span><br><span class="line"><span class="built_in">net</span> <span class="built_in">start</span> mysql80 #或者<span class="built_in">net</span> <span class="built_in">start</span> mysql开启服务</span><br></pre></td></tr></table></figure><h2 id="创建从服务器的用户和权限"><a href="#创建从服务器的用户和权限" class="headerlink" title="创建从服务器的用户和权限"></a>创建从服务器的用户和权限</h2><h3 id="方法一：-1"><a href="#方法一：-1" class="headerlink" title="方法一："></a>方法一：</h3><p><code>win+R</code>输入<code>cmd</code>，进入命令行，登录mysql</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">#然后输入密码</span><br></pre></td></tr></table></figure><p>然后使用命令行创建用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create user &#x27;用户名&#x27;@&#x27;%&#x27;  identified by &#x27;密码&#x27;;#创建用户</span><br><span class="line">grant all privileges on *.* to &#x27;用户名&#x27;@&#x27;%&#x27;;#授予权限</span><br><span class="line"></span><br><span class="line">#比如</span><br><span class="line">#create user &#x27;test_user&#x27;@&#x27;%&#x27;  identified by &#x27;123456&#x27;;</span><br><span class="line">#grant all privileges on *.* to &#x27;test_user&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure><h3 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h3><p>进入<code>navicat</code>，</p><img src="\image\article\MYSQL主从配置\image-20220803113429776.png" alt="image-20220803113429776" style="zoom: 67%;" /><p>按以下格式创建用户</p><img src="\image\article\MYSQL主从配置\image-20220803113545220.png" alt="image-20220803113545220" style="zoom: 67%;" /><p>用户名和密码改成你自己的，其他的按照这格式就行。</p><img src="\image\article\MYSQL主从配置\image-20220803113643506.png" alt="image-20220803113643506" style="zoom:50%;" /><p>服务器权限<font color="red"><strong>全选</strong></font>，因为我已经创建过了就不全选创建了。最后保存就好了。</p><p>最后你可以用以下命令，试试新建的用户能不能登录</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u &#x27;你刚创建的用户名&#x27; -p&#x27;密码&#x27;</span><br><span class="line">#比如： mysql -u test_user -p <span class="number">123456</span></span><br></pre></td></tr></table></figure><p>能登录就是成功了。不能登录就看看你创建用户的时候，<strong>主机</strong>那块是不是<code>%</code>。<code>%</code>表示，任何服务器都可以连接。</p><p><code>create user &#39;用户名&#39;@&#39;%&#39;  identified by &#39;密码&#39;;</code>是这个%哦。</p><h2 id="查看主服务器状态"><a href="#查看主服务器状态" class="headerlink" title="查看主服务器状态"></a>查看主服务器状态</h2><p><code>win+R</code>输入<code>cmd</code>，进入命令行，登录mysql</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">#然后输入密码</span><br></pre></td></tr></table></figure><p>输入<code>show master status;</code></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show master status;</span><br><span class="line">+----------------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File                       | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+----------------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| DESKTOP-GQI06FR-bin.<span class="number">000014</span> |      <span class="number">531</span> |              |                  |                   |</span><br><span class="line">+----------------------------+----------+--------------+------------------+-------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0</span>.<span class="number">00</span> sec)</span><br></pre></td></tr></table></figure><p>记住这个<code> DESKTOP-GQI06FR-bin.000014</code>和<code>531</code>，待会配置从库使用，而且也<font color="red"><strong>不要再有任何mysql操作了</strong></font>，否则这个是会变的。</p><h1 id="从服务器配置"><a href="#从服务器配置" class="headerlink" title="从服务器配置"></a>从服务器配置</h1><p>从服务器是Linux</p><h2 id="配置文件-1"><a href="#配置文件-1" class="headerlink" title="配置文件"></a>配置文件</h2><p> 修改配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure><p>在[msqld]下面添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置server-id</span></span><br><span class="line">server-id=2</span><br></pre></td></tr></table></figure><p>只要保证<code>server-id</code>是唯一的就行，与主库和其他从库id不同就行。</p><h2 id="重启myql服务"><a href="#重启myql服务" class="headerlink" title="重启myql服务"></a>重启myql服务</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure><h2 id="配置从库"><a href="#配置从库" class="headerlink" title="配置从库"></a>配置从库</h2><p><code>win+R</code>输入<code>cmd</code>，进入命令行，登录mysql</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">#然后输入密码</span><br></pre></td></tr></table></figure><p>然后执行以下sql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">change master to master_host=&#x27;192.168.20.1&#x27;,master_port=3306,master_user=&#x27;test_user&#x27;,master_password=&#x27;123456&#x27;,master_log_file=&#x27;DESKTOP-GQI06FR-bin.000014&#x27;,master_log_pos=531;</span><br></pre></td></tr></table></figure><ol><li><code>master_host</code>对应主服务器的IP地址。</li><li><code>master_port</code>对应主服务器的端口。</li><li><code>master_log_file</code>对应show master status显示的File列：DESKTOP-GQI06FR-bin.000014。</li><li><code>master_log_pos</code>对应show master status显示的Position列：531。</li></ol><p>然后开启主从复制</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start slave;  #开启主从复制</span><br><span class="line">stop slave;#关闭主从复制</span><br></pre></td></tr></table></figure><h1 id="查看是否配置成功"><a href="#查看是否配置成功" class="headerlink" title="查看是否配置成功"></a>查看是否配置成功</h1><p>在从服务器上执行以下SQL语句</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show slave status;</span><br></pre></td></tr></table></figure><p>然后能看到<code>Waiting for source to send event</code>，就表示配置成功。</p><p>或者在windows，打开<code>navicat</code></p><p>在<font color="red"><strong>主库</strong></font>上新建一个数据库，看从库是否也新建一个。</p>]]></content>
    
    
    <summary type="html">主库windows,从库linux虚拟机</summary>
    
    
    
    <category term="Mysql" scheme="http://example.com/category/Mysql/"/>
    
    
    <category term="MySql" scheme="http://example.com/tag/MySql/"/>
    
  </entry>
  
  <entry>
    <title>乘积小于k的子数组</title>
    <link href="http://example.com/post/d09e42a4.html"/>
    <id>http://example.com/post/d09e42a4.html</id>
    <published>2022-08-01T13:21:39.000Z</published>
    <updated>2022-08-02T13:21:47.499Z</updated>
    
    <content type="html"><![CDATA[<h1 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h1><p>给你一个整数数组 <code>nums</code> 和一个整数 <code>k</code> ，请你返回子数组内所有元素的乘积<font color="red"><strong>严格小于 <code>k</code></strong></font> 的连续子数组的数目。</p><p>示例 1：</p><blockquote><p>输入：nums &#x3D; [10,5,2,6], k &#x3D; 100<br>输出：8<br>解释：8 个乘积小于 100 的子数组分别为：[10]、[5]、[2],、[6]、[10,5]、[5,2]、[2,6]、[5,2,6]。<br>需要注意的是 [10,5,2] 并不是乘积小于 100 的子数组。</p></blockquote><p>示例 2：</p><blockquote><p>输入：nums &#x3D; [1,2,3], k &#x3D; 0<br>输出：0</p></blockquote><p>提示: </p><ul><li>1 &lt;&#x3D; nums.length &lt;&#x3D; 3 * 104</li><li>1 &lt;&#x3D; nums[i] &lt;&#x3D; 1000</li><li>0 &lt;&#x3D; k &lt;&#x3D; 106</li></ul><p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/subarray-product-less-than-k">https://leetcode.cn/problems/subarray-product-less-than-k</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p><p>这道题，我属实有心理阴影….在我刚开始做题的时候…</p><img src="/image/article/乘积小于k的子数组/a.png" alt="a" style="zoom:67%;" /><p>一遍一遍提交，都不通过…提交的次数比这个多，只不过没有显示全【红色的】，绝望的一批 (ノ｀Д)ノ，颇有想掀桌子的冲动，然后今天又碰到这题了，虽然一次通过了，但仍心有余悸…o(≧口≦)o【仍想了挺久的】然后记录一下题解…整理一下思路</p><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>首先这个题要求的是<font color="red"><strong>乘积</strong></font>,就不能用<code>数组前缀乘积</code>了，因为一直乘积可能会超过int的范围，虽然可以用 长整型<code>long</code>，但不建议这么用。【这是我第一次做题的时候的思路，还是太年轻，因为每次看到<code>数组滑窗</code>，总会想到<code>前缀和</code>】</p><p>既然是滑窗，就得定义窗口左右的指针</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> -<span class="number">1</span>,right = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>初始化<code>窗口的乘积</code>以及<code>连续子数组的数目</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">mult</span> <span class="operator">=</span> nums[<span class="number">0</span>];  <span class="comment">//注意，数组的长度是大于等于1的</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure><ol><li><p>当窗口的乘积&lt;k时</p><ol><li>连续子数组的数目 加上  窗口的大小<code>result+=(right-left);</code>【？为什么加上窗口的大小呢，稍后图示说明，感觉这个应该算是题的一个难点吧】</li><li>然后右边扩大窗口 <code>right++;mult*=nums[right];</code></li></ol></li><li><p>当窗口乘积&gt;&#x3D;k时</p><ol><li><p>左边窗口缩小 <code>left++;mult/=nums[left];</code></p><p>注意，有可能这个左边窗口缩小到<code>left&gt;=right</code>,那就需要扩大右边的窗口了<code>right++;mult*=nums[right];</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if(left&gt;=right)&#123;</span><br><span class="line">    right++;</span><br><span class="line">    mult*=nums[right];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><p>以<code>nums = [10,5,2,6], k = 100</code>为例。</p><img src="\image\article\乘积小于k的子数组\1.PNG" alt="1" style="zoom:50%;" /><p><code>result+=1</code>，子数组是<code>[10]</code></p><img src="\image\article\乘积小于k的子数组\2.PNG" alt="2" style="zoom:50%;" /><p><code>result+=2</code>，子数组是<code>[10,5],[5]</code></p><img src="\image\article\乘积小于k的子数组\3.PNG" alt="3" style="zoom:50%;" /><p>窗口子数组就没有严格小于k，缩小窗口。</p><img src="\image\article\乘积小于k的子数组\4.PNG" alt="4" style="zoom:50%;" /><p><code>result+=2</code>，子数组是<code>[5,2],[2]</code></p><img src="\image\article\乘积小于k的子数组\5.PNG" alt="5" style="zoom:50%;" /><p><code>result+=2</code>，子数组是<code>[5,2,6],[2,6],[6]</code></p><p>由于窗口已经到达边界，所以结束，<code>result=8</code></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numSubarrayProductLessThanK</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> -<span class="number">1</span>,right = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mult</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (right&lt;nums.length)&#123;</span><br><span class="line">            <span class="keyword">if</span>(mult&lt;k)&#123;</span><br><span class="line">                result+=(right-left);</span><br><span class="line">                right++;</span><br><span class="line">                mult*=nums[right];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                left++;</span><br><span class="line">                mult/=nums[left];</span><br><span class="line">                <span class="keyword">if</span>(left&gt;=right)&#123;</span><br><span class="line">                    right++;</span><br><span class="line">                    mult*=nums[right];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但仍然有个问题，你可以把上述代码运行一下，不出意外的话，应该是出意外了。嘿嘿嘿ο(&#x3D;•ω＜&#x3D;)ρ⌒☆</p><p><code>java.lang.ArrayIndexOutOfBoundsException</code>数组越界了。在循环过程中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (right&lt;nums.length)&#123;</span><br><span class="line">    <span class="keyword">if</span>(mult&lt;k)&#123;</span><br><span class="line">        result+=(right-left);  <span class="comment">//假如此时right = nums.length-1</span></span><br><span class="line">        right++;               <span class="comment">//right = nums.length</span></span><br><span class="line">        mult*=nums[right];      <span class="comment">//nums[nums.length]就会越界。</span></span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        left++;</span><br><span class="line">        <span class="keyword">if</span>(left&gt;=right)&#123;</span><br><span class="line">            right++;</span><br><span class="line">            mult*=nums[right];  <span class="comment">//这也同样</span></span><br><span class="line">        &#125;</span><br><span class="line">        mult/=nums[left];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>所以需要把<code>mult*=nums[right];</code>，改为<code>if(right&lt;nums.length) mult*=nums[right];</code>。</p><h1 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numSubarrayProductLessThanK</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> -<span class="number">1</span>,right = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mult</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (right&lt;nums.length)&#123;</span><br><span class="line">            <span class="keyword">if</span>(mult&lt;k)&#123;</span><br><span class="line">                result+=(right-left);</span><br><span class="line">                right++;</span><br><span class="line">                <span class="keyword">if</span>(right&lt;nums.length) mult*=nums[right];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                left++;</span><br><span class="line">                mult/=nums[left];</span><br><span class="line">                <span class="keyword">if</span>(left&gt;=right)&#123;</span><br><span class="line">                    right++;</span><br><span class="line">                    <span class="keyword">if</span>(right&lt;nums.length) mult*=nums[right];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">滑动窗口</summary>
    
    
    
    <category term="算法" scheme="http://example.com/category/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="LeetCode" scheme="http://example.com/tag/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>跳跃游戏II</title>
    <link href="http://example.com/post/714fed31.html"/>
    <id>http://example.com/post/714fed31.html</id>
    <published>2022-08-01T09:47:48.000Z</published>
    <updated>2022-08-03T06:22:26.747Z</updated>
    
    <content type="html"><![CDATA[<h1 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h1><p>给你一个非负整数数组 nums ，你最初位于数组的第一个位置。</p><p>数组中的每个元素代表你在该位置可以跳跃的最大长度。</p><p>你的目标是<font color="red">使用<strong>最少</strong>的跳跃次数</font>到达数组的最后一个位置。</p><p>假设你总是可以到达数组的最后一个位置。</p><p><strong>示例 1:</strong></p><blockquote><p>输入: nums &#x3D; [2,3,1,1,4]<br>输出: 2<br>解释: 跳到最后一个位置的最小跳跃数是 2。<br>     从下标为 0 跳到下标为 1 的位置，跳 1 步，然后跳 3 步到达数组的最后一个位置。</p></blockquote><p><strong>示例 2:</strong></p><blockquote><p>输入: nums &#x3D; [2,3,0,1,4]<br>输出: 2</p></blockquote><p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/jump-game-ii">https://leetcode.cn/problems/jump-game-ii</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p><h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>跳跃游戏II，可以用动态规划解，也可也用贪心解。</p><p>但最优解是用贪心，而且用贪心解也更好理解！</p><p>目标是：<font color="red">使用<strong>最少</strong>的跳跃次数</font>到达数组的最后一个位置。【我们总是可以到达数组的最后一个位置。】</p><p>既然，总是可以到达数组最后一个位置。而且要求<code>跳跃的次数</code><font color="red"><strong>最少</strong></font></p><p>那么就让我们每次跳跃的距离<font color="red"><strong>最大</strong></font>就好！</p><p>拿<code>[3,4,3,1,0,7,0,3,0,2,0,3]</code>举例。</p><p>用<code>pace</code>记录跳数。</p><p><img src="/image/article/%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8FII/IMG_0395(20220801-181050).PNG" alt="IMG_0395(20220801-181050)"></p><p><code>pace = 1</code></p><p>第一跳能跳到<code>1(下标为3)</code>。下跳的起跳点可以是<code>3,4,3,1</code>。找下一跳的最大覆盖范围。即(<code>max(i+nums[i])</code>)</p><p><img src="/image/article/%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8FII/IMG_0398(20220801-181528).PNG" alt="IMG_0398(20220801-181528)"></p><p><img src="/image/article/%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8FII/IMG_0396(20220801-181338).PNG" alt="IMG_0396(20220801-181338)"></p><p><code>pace = 2</code></p><p>下一跳最远可以跳到<code>7(下标为5)</code>。第三次起跳点可以是<code>0,7</code>。找下一跳的最大覆盖范围。即(<code>max(i+nums[i])</code>)</p><p><img src="/image/article/%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8FII/IMG_0399(20220801-182450).PNG" alt="IMG_0399(20220801-182450)"></p><p><code>pace = 3</code></p><p>第三跳最远就可以跳到数组末尾了，所以结果已经出了，最少<code>3</code>跳。</p><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">jump</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            maxarea:最大范围</span></span><br><span class="line"><span class="comment">            curarea:当前所能抵达的范围</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">1</span>)<span class="keyword">return</span>  <span class="number">0</span>;<span class="comment">//应对特殊情况 [0]</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">maxarea</span> <span class="operator">=</span> nums[<span class="number">0</span>],curarea = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pace</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (maxarea&lt;nums.length-<span class="number">1</span>)&#123;<span class="comment">//如果最大范围已经可以到达末尾了</span></span><br><span class="line">            pace++;</span><br><span class="line">            <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> curarea,end = maxarea;</span><br><span class="line">            curarea = maxarea;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start;i&lt;=end;i++)&#123;<span class="comment">//注意是 左闭右闭</span></span><br><span class="line">                maxarea = Math.max(maxarea,i+nums[i]);<span class="comment">//寻找下一条最大范围</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pace;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="图解"><a href="#图解" class="headerlink" title="图解"></a>图解</h2><p><img src="/image/article/%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8FII/IMG_0401(20220801-194202).PNG" alt="IMG_0401(20220801-194202)"></p><h1 id="有什么疑问欢迎评论区留言"><a href="#有什么疑问欢迎评论区留言" class="headerlink" title="有什么疑问欢迎评论区留言!"></a>有什么疑问欢迎评论区留言!</h1>]]></content>
    
    
    <summary type="html">贪心解跳跃游戏II</summary>
    
    
    
    <category term="算法" scheme="http://example.com/category/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="LeetCode" scheme="http://example.com/tag/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>Linux安装Redis</title>
    <link href="http://example.com/post/acb8270e.html"/>
    <id>http://example.com/post/acb8270e.html</id>
    <published>2022-08-01T06:36:11.000Z</published>
    <updated>2022-08-01T08:22:20.598Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redis下载"><a href="#Redis下载" class="headerlink" title="Redis下载"></a>Redis下载</h1><p><a href="https://download.redis.io/releases/">https://download.redis.io/releases/</a></p><p>下载4.0.0版本【其他版本也可也】</p><h1 id="Redis安装"><a href="#Redis安装" class="headerlink" title="Redis安装"></a>Redis安装</h1><p>1、将Redis安装包上传到LInux</p><p>2、解压安装包，命令 <code>tar -zxvf redis-4.0.0.tar.gz -C /usr/local</code></p><p>​解压的是Redis的源码【C语言】，需要对它进行编译。</p><p>3、安装Redis的依赖环境gcc，命令<code>yum install gcc-c++</code>【对C语言源码进行编译的环境】</p><p>4、进入&#x2F;usr&#x2F;local&#x2F;redis-4.0.0，进行编译，命令：<code>make</code></p><p>5、进入reids的src目录，进行安装，命令：<code>make install</code></p><p>最后就安装完毕了</p><p>在<code>redis-4.0.0/src</code>目录下，可以看到<code>redis-server</code>和<code>redis-cli</code>两个文件。</p><p>在<code>redis-4.0.0</code>目录下，可以看到<code>redis-conf</code>文件，这是redis的配置文件。</p><h1 id="Linux服务的启动和停止"><a href="#Linux服务的启动和停止" class="headerlink" title="Linux服务的启动和停止"></a>Linux服务的启动和停止</h1><p>Linux中redis服务启动，可以使用redis-server，默认端口号为6379</p><p>在src目录下，执行<code>./redis-server</code>，就可以开启服务。</p><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Redis/image-20220801150048450.png" alt="image-20220801150048450"></p><p><code>Ctrl C</code>就可以停止服务。</p><h2 id="后台启动redis服务"><a href="#后台启动redis服务" class="headerlink" title="后台启动redis服务"></a>后台启动redis服务</h2><p>进入<code>redis-4.0.0</code>目录，输入<code>vim redis.conf</code>来修改配置文件。</p><p>输入<code>/daemonize</code> 查找daemonize</p><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Redis/image-20220801150537191.png" alt="image-20220801150537191"></p><p>输入<code>i</code>，进入插入模式，修改完毕后，按<code>Esc</code>，再输入<code>:wq</code>回车，保存并退出。</p><p>如果要修改端口号就修改配置文件<code>redis 6379</code>,就可以。</p><p>重新启动redis【在redis的根目录下，执行以下命令】</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis-server ./redis.conf</span><br></pre></td></tr></table></figure><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Redis/image-20220801151048138.png" alt="image-20220801151048138"></p><h1 id="给redis设置密码"><a href="#给redis设置密码" class="headerlink" title="给redis设置密码"></a>给redis设置密码</h1><p>修改redis的配置文件。找到<code>requirepass foobared</code></p><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Redis/image-20220801151611560.png" alt="image-20220801151611560"></p><p>将这一行的注释去掉，并将<code>foobared</code> 改为你自己的密码</p><p>关闭之前的redis服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep redis<span class="comment">#查看redis进程</span></span><br></pre></td></tr></table></figure><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Redis/image-20220801151926216.png" alt="image-20220801151926216"></p><p>进程ID为32056【注意这个进程ID是变化的】</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 32056 <span class="comment">#杀掉这个进程</span></span><br></pre></td></tr></table></figure><p>重新启动redis【在redis的根目录下，执行以下命令】</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis-server ./redis.conf</span><br></pre></td></tr></table></figure><h1 id="连接Redis服务"><a href="#连接Redis服务" class="headerlink" title="连接Redis服务"></a>连接Redis服务</h1><h2 id="本地连接redis服务"><a href="#本地连接redis服务" class="headerlink" title="本地连接redis服务"></a>本地连接redis服务</h2><p>在redis的根目录下，执行以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis-cli -h localhost -p 6379 -a <span class="string">&quot;你的密码&quot;</span></span><br></pre></td></tr></table></figure><h2 id="远程连接redis服务"><a href="#远程连接redis服务" class="headerlink" title="远程连接redis服务"></a>远程连接redis服务</h2><p>redis默认是拒绝redis远程连接的</p><p>修改配置文件</p><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Redis/image-20220801152754082.png" alt="image-20220801152754082"></p><p>找到<code>bind 127.0.01</code> ，并将其注释掉。保存并退出</p><p>然后重启服务。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep redis<span class="comment">#查看redis进程</span></span><br><span class="line"><span class="built_in">kill</span> -9 32056 <span class="comment">#杀掉这个进程</span></span><br><span class="line">src/redis-server ./redis.conf</span><br></pre></td></tr></table></figure><p>注意要关闭防火墙</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld </span><br></pre></td></tr></table></figure><p>最后在window在redis目录下，进入cmd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h <span class="string">&quot;ip地址&quot;</span> -p 6379 -a <span class="string">&quot;你的密码&quot;</span></span><br></pre></td></tr></table></figure><p>然后就可以远程连接redis了</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Redis下载&quot;&gt;&lt;a href=&quot;#Redis下载&quot; class=&quot;headerlink&quot; title=&quot;Redis下载&quot;&gt;&lt;/a&gt;Redis下载&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://download.redis.io/releases/&quot;&gt;http</summary>
      
    
    
    
    <category term="Linux" scheme="http://example.com/category/Linux/"/>
    
    
    <category term="Linux" scheme="http://example.com/tag/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux安装Mysql</title>
    <link href="http://example.com/post/42bdef23.html"/>
    <id>http://example.com/post/42bdef23.html</id>
    <published>2022-07-31T13:26:54.000Z</published>
    <updated>2022-08-02T13:15:46.020Z</updated>
    
    <content type="html"><![CDATA[<p>安装方式使用RPM, 【RPM软件包管理器，是红帽Linux用于管理和安装软件的工具】</p><h1 id="下载mysql安装包"><a href="#下载mysql安装包" class="headerlink" title="下载mysql安装包"></a>下载mysql安装包</h1><p> <a href="https://dev.mysql.com/downloads/mysql/">MySQL :: Download MySQL Community Server</a></p><p>下载界面，点击进去。</p><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Mysql/image-20220802204107474.png" alt="image-20220802204107474"></p><p>我使用的CentOS7，选择Red Hat。这两个一样。点击下载安装包。</p><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Mysql/image-20220802204211308.png" alt="image-20220802204211308"></p><p>下载的是<code>.tar</code>，结尾的压缩包，我下载的是<code>mysql-8.0.30-1.el7.x86_64.rpm-bundle.tar</code></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="检测当前系统是否安装Mysql数据库"><a href="#检测当前系统是否安装Mysql数据库" class="headerlink" title="检测当前系统是否安装Mysql数据库"></a>检测当前系统是否安装Mysql数据库</h2><p><code>rpm -qa</code>命令是查询当前系统中安装的所有软件。</p><p>命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep mysql</span><br><span class="line">rpm -qa|grep mariadb</span><br></pre></td></tr></table></figure><blockquote><p>如果当前系统中已经安装mysql数据库，安装将失败。CentOS7自带mariadb，于Mysql数据库冲突。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon etc]<span class="comment"># rpm -qa|grep mysql</span></span><br><span class="line">[root@bogon etc]<span class="comment"># rpm -qa|grep mariadb</span></span><br><span class="line">mariadb-libs-5.5.60-1.el7_5.x86_64</span><br></pre></td></tr></table></figure><p>存在mariadb【因为我的是CentOS7】</p><h2 id="卸载已安装的冲突软件"><a href="#卸载已安装的冲突软件" class="headerlink" title="卸载已安装的冲突软件"></a>卸载已安装的冲突软件</h2><p>若你在上一步查询到冲突软件，可使用以下命令来卸载，如果没有，可以跳过。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps 软件名称</span><br><span class="line"><span class="comment">#在这里我要卸载的是 mariadb,所以我的命令如下</span></span><br><span class="line">rpm -e --nodeps mariadb-libs-5.5.60-1.el7_5.x86_64</span><br></pre></td></tr></table></figure><h2 id="将Mysql安装包上传到Linux并解压"><a href="#将Mysql安装包上传到Linux并解压" class="headerlink" title="将Mysql安装包上传到Linux并解压"></a>将Mysql安装包上传到Linux并解压</h2><p>解压命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf 待解压的文件名 -C 解压到的目录</span><br><span class="line"><span class="comment">#在这里的我解压到/usr/local/mysql</span></span><br><span class="line"><span class="built_in">mkdir</span> /usr/local/mysql                               <span class="comment">#首先得创建目录</span></span><br><span class="line">tar -xvf mysql-8.0.30-1.el7.x86_64.rpm-bundle.tar -C /usr/local/mysql<span class="comment">#解压</span></span><br></pre></td></tr></table></figure><p>解压后的文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon /]<span class="comment"># cd /usr/local/mysql</span></span><br><span class="line">[root@bogon mysql]<span class="comment"># ll</span></span><br><span class="line">total 839324</span><br><span class="line">-rw-r--r--. 1 7155 31415  14709160 Jul  7 16:00 mysql-community-client-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415   2632376 Jul  7 16:00 mysql-community-client-plugins-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415    660264 Jul  7 16:00 mysql-community-common-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415 481580308 Jul  7 16:01 mysql-community-debuginfo-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415   1958588 Jul  7 16:01 mysql-community-devel-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415   4217604 Jul  7 16:01 mysql-community-embedded-compat-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415   2218720 Jul  7 16:01 mysql-community-icu-data-files-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415   1582228 Jul  7 16:01 mysql-community-libs-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415    685808 Jul  7 16:02 mysql-community-libs-compat-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415  56195524 Jul  7 16:02 mysql-community-server-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415  21350292 Jul  7 16:02 mysql-community-server-debug-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 7155 31415 271649024 Jul  7 16:04 mysql-community-test-8.0.30-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><h2 id="按照顺序按照rpm软件包"><a href="#按照顺序按照rpm软件包" class="headerlink" title="按照顺序按照rpm软件包"></a>按照顺序按照rpm软件包</h2><p><font color="red" size=5>注意：一定要按顺序！</font></p><p>依次解压：</p><ol><li>common</li><li>client-plugins</li><li>libs</li><li>client</li><li>server</li></ol><p>它们之间存在依赖关系，必须按顺序安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql-community-common-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-plugins-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh  mysql-community-client-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-icu-data-files-8.0.30-1.el7.x86_64.rpm</span><br><span class="line">yum install net-tools</span><br><span class="line">rpm -ivh mysql-community-server-8.0.30-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><p>依次执行以上命令即可</p><blockquote><p>说明：</p><ul><li>安装过程中提示缺少net-tools依赖，使用yum安装</li><li>可以通过指令升级现有软件及系统内核<code>yum update</code></li></ul></blockquote><p>然后就安装完毕啦！</p><h1 id="Mysql配置"><a href="#Mysql配置" class="headerlink" title="Mysql配置"></a>Mysql配置</h1><h2 id="启动mysql"><a href="#启动mysql" class="headerlink" title="启动mysql"></a>启动mysql</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysqld           <span class="comment">#查看mysql服务状态</span></span><br><span class="line">systemctl start mysqld<span class="comment">#启动mysql服务</span></span><br></pre></td></tr></table></figure><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Mysql/image-20220731221221099.png" alt="image-20220731221221099"></p><p>设置开启启动mysql服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br></pre></td></tr></table></figure><p>其他命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -tunlp|grep mysql   <span class="comment">#查看mysql是否启动</span></span><br><span class="line">ps -ef|grep mysql  <span class="comment">#查看MySQL进程</span></span><br></pre></td></tr></table></figure><p><strong><font color="red">如果你以前设置过一下内容，就不用再设置了。</font></strong></p><h2 id="查阅临时密码"><a href="#查阅临时密码" class="headerlink" title="查阅临时密码"></a>查阅临时密码</h2><p>使用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /var/log/mysqld.log|grep localhost</span><br></pre></td></tr></table></figure><p><img src="/image/article/Linux%E5%AE%89%E8%A3%85Mysql/image-20220731221954159.png" alt="image-20220731221954159"></p><p>这就是临时密码<code>&amp;sqBTL515Ghu</code></p><h2 id="登录MySQL数据库-修改密码，开放访问权限"><a href="#登录MySQL数据库-修改密码，开放访问权限" class="headerlink" title="登录MySQL数据库,修改密码，开放访问权限"></a>登录MySQL数据库,修改密码，开放访问权限</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p<span class="comment">#登录mysql（使用临时密码登录）</span></span><br><span class="line"><span class="comment">#然后输入密码【密码是看不见的】   如果密码总是不对，那你试试你之前的密码...</span></span><br><span class="line"><span class="comment">#修改密码</span></span><br><span class="line"><span class="built_in">set</span> global validate_password_length=4;</span><br><span class="line"><span class="built_in">set</span> global validate_password_policy=LOW;</span><br><span class="line"><span class="built_in">set</span> password=password(<span class="string">&#x27;root&#x27;</span>);</span><br><span class="line"><span class="comment">#开启访问权限</span></span><br><span class="line">grant all on *.* to <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>使用<code>Windows</code>连接<code>linux</code>的<code>mysql</code>。需要打开<code>linux</code>的端口号，以及关闭<code>linux</code>的防火墙【在同一局域网】</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -AINPUT -ptcp --dport 3306 -jACCEPT  #打开3306端口号</span><br><span class="line">systemctl stop firewalld #关闭防火墙</span><br><span class="line">systemctl start firewalld#开启防火墙</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Linux安装Mysql并配置</summary>
    
    
    
    <category term="Linux" scheme="http://example.com/category/Linux/"/>
    
    
    <category term="Linux" scheme="http://example.com/tag/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux安装jdk</title>
    <link href="http://example.com/post/c357b778.html"/>
    <id>http://example.com/post/c357b778.html</id>
    <published>2022-07-31T12:02:27.000Z</published>
    <updated>2022-08-01T08:22:30.703Z</updated>
    
    <content type="html"><![CDATA[<p>安装JDK,使用的Linux软件安装方式是<code>二进制发布包安装</code></p><p>该安装方式，软件已经针对具体平台编译打包发布，只要解压，修改配置即可。</p><p>操作步骤：</p><p>1、使用上传工具将jdk的二进制发布包上传到linux。</p><blockquote><p>链接：<a href="https://pan.baidu.com/s/1D1Ttau-ouWFWGpZdZee6Hg">https://pan.baidu.com/s/1D1Ttau-ouWFWGpZdZee6Hg</a><br>提取码：zfxt</p></blockquote><p>2、解压安装包，命令为<code>tar -zxvf jdk-8u171-linux-x64.tar.gz -C /usr/local</code></p><p>​将<code>jdk-8u171-linux-x64.tar.gz</code> 解压到 <code>/usr/local</code>目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon /]<span class="comment"># cd /usr/local</span></span><br><span class="line">[root@bogon <span class="built_in">local</span>]<span class="comment"># ll</span></span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 bin</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 etc</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 games</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 include</span><br><span class="line">drwxr-xr-x. 8   10  143 255 3月  29 2018 jdk1.8.0_171    解压后的jdk安装包</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 lib</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 lib64</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 libexec</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 sbin</span><br><span class="line">drwxr-xr-x. 5 root root  49 7月  28 04:01 share</span><br><span class="line">drwxr-xr-x. 2 root root   6 4月  11 2018 src</span><br></pre></td></tr></table></figure><p>3、配置环境变量</p><p>​使用<code> vim /etc/profile</code>命令 修改<code>/etc/profile</code>文件，在文件末尾加入如下配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/local/jdk1.8.0_171    <span class="comment">#解压目录</span></span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>然后 <code>Esc</code> 输入 <code>:wq</code>  并回车 保存并退出。</p><blockquote><p>注意：等号<code>=</code>两边不能有空格，例如：<code>JAVA_HOME = /usr/local/jdk1.8.0_171 </code>是不行的。 </p></blockquote><p>4、重新加载profile文件，使更改的配置立即生效，<code>source /etc/profile</code></p><p>5、检查安装是否成功，命令为<code>java -version</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon etc]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">&quot;1.8.0_171&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_171-b11)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.171-b11, mixed mode)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;安装JDK,使用的Linux软件安装方式是&lt;code&gt;二进制发布包安装&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;该安装方式，软件已经针对具体平台编译打包发布，只要解压，修改配置即可。&lt;/p&gt;
&lt;p&gt;操作步骤：&lt;/p&gt;
&lt;p&gt;1、使用上传工具将jdk的二进制发布包上传到linux。&lt;/p</summary>
      
    
    
    
    <category term="Linux" scheme="http://example.com/category/Linux/"/>
    
    
    <category term="Linux" scheme="http://example.com/tag/Linux/"/>
    
  </entry>
  
</feed>
